@page "/PaletteHeader"

@using Syncfusion.Blazor.Diagram
@using Syncfusion.Blazor.Diagram.SymbolPalette
@using Syncfusion.Blazor.Buttons

<div class="control-section">
    <div class="properties">
        <SfButton Content="AddPaletteItem" OnClick="@UpdateHeading" />
        <SfButton Content="RemovePaletteItem" OnClick="@UpdateHeading1" />
        <SfButton Content="AddPalettes" OnClick="@UpdateHeading2" />
        <SfButton Content="RemovePalettes" OnClick="@UpdateHeading3" />
    </div>
    <div style="width:20%">
        <div id="palette-space" class="sb-mobile-palette" style="border: 2px solid #b200ff">
            <SfSymbolPaletteComponent @ref="@_symbolPalette" Height="300px" Width="200px"
                                      Palettes="@_palettes" SymbolHeight="60" SymbolWidth="60" SymbolMargin="@_symbolMargin">
            </SfSymbolPaletteComponent>
        </div>
    </div>
</div>

@code
{
    // Define symbol preview
    private DiagramSize _symbolPreview;

    // Define symbol margin
    private SymbolMargin _symbolMargin = new SymbolMargin { Left = 15, Right = 15, Top = 15, Bottom = 15 };

    // Reference the symbol palette
    private SfSymbolPaletteComponent _symbolPalette;

    // Define palettes collection
    private DiagramObjectCollection<Palette> _palettes = new DiagramObjectCollection<Palette>();

    // Defines palette's flow-shape collection
    private DiagramObjectCollection<NodeBase> _paletteNodes = new DiagramObjectCollection<NodeBase>();

    protected override void OnInitialized()
    {
        InitPaletteModel();
    }

    private void InitPaletteModel()
    {
        Node node = new Node()
        {
            ID = "Rectangle",
            Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Rectangle },
            Style = new ShapeStyle() { Fill = "#6495ED", StrokeColor = "#6495ED" },
        };
        _paletteNodes.Add(node);

        _palettes = new DiagramObjectCollection<Palette>()
        {
            new Palette() { Symbols = _paletteNodes, Title = "Basic Shapes", ID = "Basic Shapes" },
        };
    }

    //Method to update heading
    private void UpdateHeading()
    {
        Node Star = new Node()
        {
            ID = "Star",
            Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Star }
        };
        _symbolPalette.AddPaletteItem("Basic Shapes", Star, false);
    }

    //Method to update heading
    private void UpdateHeading1()
    {
        _symbolPalette.RemovePaletteItem("Basic Shapes", "Star");
    }

    //Method to update heading
    private void UpdateHeading2()
    {
        DiagramObjectCollection<NodeBase> newNodes = new DiagramObjectCollection<NodeBase>();

        Node newNode = new Node() { ID = "newNode", Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.Process } };
        newNodes.Add(newNode as NodeBase);

        DiagramObjectCollection<Palette> newPalettes = new DiagramObjectCollection<Palette>()
        {
                new Palette(){Symbols =newNodes,Title="FlowShapes",ID="FlowShapes" },
            };
        _symbolPalette.AddPalettes(newPalettes);
    }

    private void UpdateHeading3()
    {
        _symbolPalette.RemovePalettes("FlowShapes");
    }
}

