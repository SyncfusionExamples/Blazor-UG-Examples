@page "/PaletteExpandMode"

@using Syncfusion.Blazor.Diagram
@using Syncfusion.Blazor.Diagram.SymbolPalette
@using Syncfusion.Blazor.DropDowns

<SfSymbolPaletteComponent @ref="@_palette" Width="80%" Height="645px" Palettes="@_palettes" SymbolHeight="@_symbolHeight" SymbolWidth="@_symbolWidth" AllowDrag="false">
</SfSymbolPaletteComponent>

@code
{
    // Reference the symbolpalette
    private SfSymbolPaletteComponent _palette;

    // Define the symbol margin
    private SymbolMargin _symbolMargin = new SymbolMargin { Left = 15, Right = 15, Top = 15, Bottom = 15 };

    private int? _index { get; set; } = 1;

    // Define palette collection
    private DiagramObjectCollection<Palette> _palettes;

    private SfDropDownList<string, Modevalue> _expandable;

    private int? _sizeChangeValue { get; set; } = 80;

    private bool _animationChecked = true;

    private bool _animationMode = true;

    private bool _icon = true;

    private double _symbolHeight = 50;

    private double _symbolWidth = 50;

    private string _height { get; set; } = "580px";

    private double _length = 70;

    private DiagramObjectCollection<Connector> _connectorCollection { get; set; }

    private SymbolInfo _symbolInfo { get; set; }

    private DiagramObjectCollection<NodeBase> _basicShape { get; set; }

    private DiagramObjectCollection<NodeBase> _connectors { get; set; }

    private DiagramObjectCollection<NodeBase> _flowShapes { get; set; }
    private class Modevalue
    {
        public string Text { get; set; }
        public string Value { get; set; }
    }

    private List<Modevalue> _expandMode = new List<Modevalue>() {
         new Modevalue  { Text ="Single",  Value= "Single" },
         new Modevalue  { Text = "Multiple", Value = "Multiple" },
    };

    private Syncfusion.Blazor.Navigations.ExpandMode _expandModeType = Syncfusion.Blazor.Navigations.ExpandMode.Multiple;

    private void ModeChange(Syncfusion.Blazor.DropDowns.ChangeEventArgs<string, Modevalue> args)
    {
        if (args.Value == "Multiple")
        {
            _palette.Palettes[0].IsExpanded = true;
            _palette.Palettes[1].IsExpanded = true;
            _palette.Palettes[2].IsExpanded = true;
        }
        else
        {
            _palette.Palettes[0].IsExpanded = true;
            _palette.Palettes[1].IsExpanded = false;
            _palette.Palettes[2].IsExpanded = false;
        }

        this.StateHasChanged();
    }

    private void SizeChange(Syncfusion.Blazor.Inputs.ChangeEventArgs<int?> args)
    {
        this._symbolWidth = double.Parse(args.Value.ToString());
        this._symbolHeight = double.Parse(args.Value.ToString());
        this._sizeChangeValue = int.Parse(args.Value.ToString());
        this.StateHasChanged();
    }


    private void AnimationChange(Syncfusion.Blazor.Buttons.ChangeEventArgs<bool> args)
    {
        this._animationChecked = args.Checked;
        this._animationMode = args.Checked;
        this.StateHasChanged();
    }

    private void IconChange(Syncfusion.Blazor.Buttons.ChangeEventArgs<bool> args)
    {
        for (var i = 0; i < _palettes.Count; i++)
        {
            this._icon = args.Checked;

            if (args.Checked)
            {
                if (i == 0)
                {
                    _palettes[i].IconCss = "e-ddb-icons e-basic";
                }
                else if (i == 1)
                {
                    _palettes[i].IconCss = "e-ddb-icons e-flow";
                }
                else if (i == 2)
                {
                    _palettes[i].IconCss = "e-ddb-icons e-connector";
                }
            }
            else
            {
                _palettes[i].IconCss = string.Empty;
            }

            this.StateHasChanged();
        }
    }

    protected override void OnInitialized()
    {
        InitializePalatte();
    }

    private void InitializePalatte()
    {
        _palettes = new DiagramObjectCollection<Palette>();

        _symbolInfo = new SymbolInfo() { Fit = true };

        _basicShape = new DiagramObjectCollection<NodeBase>
        {
            new Node()
            {
                ID = "Rectangle",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Rectangle },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Node()
            {
                ID = "Ellipse",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Ellipse },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Node()
            {
                ID = "Parallelogram",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Parallelogram },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Node()
            {
                ID = "Triangle",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Triangle },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Node()
            {
                ID = "Hexagon",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Hexagon },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Node()
            {
                ID = "Pentagon",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Pentagon },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Node()
            {
                ID = "Cylinder",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Cylinder },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Node()
            {
                ID = "Star",
                Shape = new BasicShape() { Type = NodeShapes.Basic, Shape = NodeBasicShapes.Star },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            }
        };

        _connectors = new DiagramObjectCollection<NodeBase>()
        {
            new Connector()
            {
                ID = "Link1",
                Type = ConnectorSegmentType.Orthogonal,
                SourcePoint = new DiagramPoint() { X = 0, Y = 0 },
                TargetPoint = new DiagramPoint() { X = 40, Y = 40 },
                TargetDecorator = new DecoratorSettings() { Shape = DecoratorShape.Arrow, Style = new ShapeStyle() { StrokeColor = "#757575", Fill = "#757575" } },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Connector()
            {
                ID = "link3",
                Type = ConnectorSegmentType.Orthogonal,
                SourcePoint = new DiagramPoint() { X = 0, Y = 0 },
                TargetPoint = new DiagramPoint() { X = 40, Y = 40 },
                TargetDecorator = new DecoratorSettings() { Shape = DecoratorShape.None },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Connector()
            {
                ID = "Link21",
                Type = ConnectorSegmentType.Straight,
                SourcePoint = new DiagramPoint() { X = 0, Y = 0 },
                TargetPoint = new DiagramPoint() { X = 40, Y = 40 },
                TargetDecorator = new DecoratorSettings() { Shape = DecoratorShape.Arrow, Style = new ShapeStyle() { StrokeColor = "#757575", Fill = "#757575" } },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Connector()
            {
                ID = "link23",
                Type = ConnectorSegmentType.Straight,
                SourcePoint = new DiagramPoint() { X = 0, Y = 0 },
                TargetPoint = new DiagramPoint() { X = 40, Y = 40 },
                TargetDecorator = new DecoratorSettings() { Shape = DecoratorShape.None },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            },
            new Connector()
            {
                ID = "link33",
                Type = ConnectorSegmentType.Bezier,
                SourcePoint = new DiagramPoint() { X = 0, Y = 0 },
                TargetPoint = new DiagramPoint() { X = 40, Y = 40 },
                TargetDecorator = new DecoratorSettings() { Shape = DecoratorShape.None },
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" }
            }
        };

        _flowShapes = new DiagramObjectCollection<NodeBase>
        {
            new Node()
            {
                ID = "Terminator",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.Terminator }
            },
            new Node()
            {
                ID = "Process",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.Process }
            },
            new Node()
            {
                ID = "Sort",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.Sort }
            },
            new Node()
            {
                ID = "Document",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.Document }
            },
            new Node()
            {
                ID = "Predefined Process",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.PreDefinedProcess }
            },
            new Node()
            {
                ID = "Punched Tape",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.PaperTap }
            },
            new Node()
            {
                ID = "Direct Data",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.DirectData }
            },
            new Node()
            {
                ID = "Sequential Data",
                Style = new ShapeStyle() { StrokeWidth = 2, StrokeColor = "#757575" },
                Shape = new FlowShape() { Type = NodeShapes.Flow, Shape = NodeFlowShapes.SequentialData }
            }
        };

        _palettes.Add(new Palette()
        {
            ID = "Flowshapess",
            IsExpanded = true,
            Symbols = _flowShapes,
            Title = "Flowshapes",
            IconCss = "e-ddb-icons e-flow"
        });

        _palettes.Add(new Palette()
        {
            ID = "BasicShape",
            IsExpanded = true,
            Symbols = _basicShape,
            Title = "Basic Shapes",
            IconCss = "e-ddb-icons e-basic"
        });

        _palettes.Add(new Palette()
        {
            ID = "Connectors",
            IsExpanded = true,
            Symbols = _connectors,
            Title = "Connectors",
            IconCss = "e-ddb-icons e-connector"
        });
    }
}
