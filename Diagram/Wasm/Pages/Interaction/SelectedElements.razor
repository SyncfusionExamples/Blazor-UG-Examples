@page "/SelectedElements"

@using Syncfusion.Blazor.Diagram

<SfDiagramComponent @ref="_diagram" Height="600px" Nodes="@_nodeCollection" Connectors="@_connectorCollection"
                    SelectionChanged="OnSelectionChanged">
</SfDiagramComponent>

@code
{
    private SfDiagramComponent _diagram;
    //Initailize the diagram's nodes collection
    private DiagramObjectCollection<Node> _nodeCollection = new DiagramObjectCollection<Node>();
    //Initailize the diagram's connector collection
    private DiagramObjectCollection<Connector> _connectorCollection = new DiagramObjectCollection<Connector>();
    
    protected override void OnInitialized()
    {
        Node node1 = new Node()
        {
            OffsetX = 100,
            OffsetY = 200,
            Height = 100,
            Width = 100,
            ID = "node1",
        };
        _nodeCollection.Add(node1);
        Connector connector1 = new Connector()
        {
            ID = "connector1",
            SourcePoint = new DiagramPoint() { X = 300, Y = 100 },
            TargetPoint = new DiagramPoint() { X = 400, Y = 300 },
            Type = ConnectorSegmentType.Orthogonal
        };
        _connectorCollection.Add(connector1);
    }

    //Event to notify selection changing event after selected the nodes/conenctors in diagram.
    private void OnSelectionChanged(SelectionChangedEventArgs args)
    {
        if (_diagram.SelectionSettings.Nodes.Count > 0)
        {
            Node selectedNode = _diagram.SelectionSettings.Nodes[0];
            //Here you can modified the selected node.
        }
        if (_diagram.SelectionSettings.Connectors.Count > 0)
        {
            Connector selectedConnector = _diagram.SelectionSettings.Connectors[0];
            //Here you can modified the selected connector.
        }
    }
}
