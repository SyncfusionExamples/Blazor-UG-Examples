@page "/UserHandleAlignment"

@using Syncfusion.Blazor.Diagram

<SfDiagramComponent Height="600px" Nodes="@_nodes" SelectionSettings="@_selectedModel">
</SfDiagramComponent>

@code
{
    //Initialize diagram's nodes collection
    private DiagramObjectCollection<Node> _nodes = new DiagramObjectCollection<Node>();
    // Defines diagram's SelectionSettings.
    private DiagramSelectionSettings _selectedModel = new DiagramSelectionSettings();
    private DiagramObjectCollection<UserHandle> _userHandles = new DiagramObjectCollection<UserHandle>();

    protected override void OnInitialized()
    {
        CreateUserHandle();
        CreateSelectionSettings();
        CreateNode();
    }

    private void CreateUserHandle()
    {
        //Creating the userhandle for cloning the objects.
        UserHandle cloneHandle = new UserHandle()
        {
            //Name of the user handle.
            Name = "clone",
            //Set path data for userhandle.
            PathData = "M60.3,18H27.5c-3,0-5.5,2.4-5.5,5.5v38.2h5.5V23.5h32.7V18z M68.5,28.9h-30c-3,0-5.5,2.4-5.5,5.5v38.2c0,3,2.4,5.5,5.5,5.5h30c3,0,5.5-2.4,5.5-5.5V34.4C73.9,31.4,71.5,28.9,68.5,28.9z M68.5,72.5h-30V34.4h30V72.5z",
            //Set visibility for the user handle.
            Visible = true,
            //Set the position for the user handle.
            //Set horizontal alignment for the user handle.
            HorizontalAlignment = HorizontalAlignment.Left,
            //Set vertical alignment for the user handle.
            VerticalAlignment = VerticalAlignment.Top,
            //Set margin for the user handle.
            Margin = new DiagramThickness() { Top = 0, Bottom = 0, Left = 0, Right = 0 },
            //Set target of the userhandle
            VisibleTarget = VisibleTarget.Node,
        };
        //Add user handle to the collection.
        _userHandles = new DiagramObjectCollection<UserHandle>()
        {
            cloneHandle
        };
    }

    private void CreateSelectionSettings()
    {
        _selectedModel = new DiagramSelectionSettings()
        {
            //Enable userhandle for selected model.
            Constraints = SelectorConstraints.All,
            UserHandles = _userHandles,
        };
    }

    private void CreateNode()
    {
        Node node = new Node()
        {
            Width = 100,
            Height = 100,
            OffsetX = 100,
            OffsetY = 100,
            Style = new ShapeStyle() { Fill = "#6495ED", StrokeColor = "#6495ED" },
        };
        _nodes.Add(node);
    }

}